## 开发文档

### 添加一个页面

1. 添加一个menu, 绑定view/person/person.vue 

   ```
   10	2024-04-15 08:53:12.692	2024-04-15 08:53:12.692		0	0	person	person	1	view/person/person.vue	4		0	0	个人信息	message	0
   ```

2. 绑定 角色 -menu 表
3. 开发 view/person/person.vue  （发送请求要注意casbin 权限

注意：navicat修改数据库表后，有时候不能及时更新，关闭数据库，后端，重新打开

**后端添加一个接口**

1. 路由层：router.go ,InitUserRouter添加一个请求接口
   baseRouter.POST("register", baseApi.RegisterUser)
2. Controller层：编写Api  （根据需求 添加修改model，和调用service层 与数据库交互）

### BUG

【发现BUG】刷新会导致token丢失，仅与登出loginout有关。触发：点击登出后再次登录。但再登出后登录又会修复。
		暂时解决：手动点击再登出后再登录

【文件上传BUG】 <el-upload  :action="`${path}/file/upload`" 引起的，上传失败，后端apifox正常。
原因：浏览器同源跨域问题，也可能el-upload  :action的问题。 
尝试过：配置了前端代理，似乎无效。
**待解决**：后续尝试不用el-upload  :action，直接axios请求8889后端。    理论上运行环境，没有跨域问题就会是正常的。
**已解决**：文件上传功能修复，解决：不能直接组件和axios，要通过utils/request的拦截器，采用自定义api调用

### 文件上传和下载地址
请求：import.meta.env.VITE_BASE_API + /file/upload
下载：import.meta.env.VITE_BASE_API + /file/...

