import{u as O,r as s,a2 as H,L as J,a as K,o as r,c as C,e as l,b as t,w as e,k as c,z as p,ad as x,F as Q,j as R,t as h,aS as W,f as w,n as X,l as m,E as Y,q as Z,x as ee,p as te,g as oe}from"./index-RMPiZlNx.js";import{E as ne}from"./el-dialog-XlT-ZYVk.js";import{E as le,a as ae}from"./el-form-item-C7Nw-3UL.js";import{G as se,A as re,D as ie,E as ce,a as me,b as de}from"./announcement-AJl1eV4M.js";import{E as ue}from"./el-card-CT766Dge.js";import"./el-popper-C79r8i4F.js";import{E as pe}from"./el-popover-CR4NRV_X.js";import{E as fe}from"./el-divider-CCPmYqO_.js";import{f as I}from"./format-8cCTDHEj.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./refs-CuXLfnsz.js";import"./isUndefined-DCTLXrZ8.js";import"./castArray-CsiYn-TA.js";import"./_baseClone-DNK2y4OU.js";import"./_initCloneObject-CxPhA3_X.js";import"./dropdown-CgCN54dW.js";const V=d=>(te("data-v-d8e2d06f"),d=d(),oe(),d),ge={id:"index"},ve={class:"block"},ye={class:"container"},xe=V(()=>l("h1",{style:{"text-align":"center"},class:"text-2xl text-cyan-300"}," 公告板 ",-1)),he=V(()=>l("div",null,[l("span",{style:{"margin-left":"5px"}},"可创建公告")],-1)),Ee={class:"clearfix text-left"},be={class:"text-left"},ke={style:{float:"right","font-size":"12px",color:"#8f8f8f"}},Ce={class:"dialog-footer"},we=Object.assign({name:"announcement"},{__name:"index",setup(d){const E=O(),i=s(!1),A=s("#80ffff"),f=s([]),_=s(!0),g=s(""),v=s(""),y=async()=>{try{let a=await se();f.value=a.data.filter(o=>o.title!="比赛介绍"),console.log(f.value),_.value=!1,X(()=>{_.value=!0})}catch{m({type:"error",message:"获取数据失败,请检查网络!"})}};H(()=>{y()});const D=J(()=>[...f.value].sort((a,o)=>new Date(o.CreatedAt)-new Date(a.CreatedAt))),S=()=>{i.value=!1},B=async()=>{try{await re({title:g.value,content:v.value}),m({type:"success",message:"添加成功"}),i.value=!1,y()}catch{m({type:"error",message:"添加失败"})}},F=async a=>{(await ie({id:a})).code===0?(m({type:"success",message:"删除成功"}),y()):m({type:"error",message:"删除失败"})};return(a,o)=>{const u=Y,N=pe,T=fe,U=K("Close"),z=Z,j=ce,G=ue,L=me,M=de,b=ee,k=le,P=ae,$=ne;return r(),C("div",ge,[l("div",ve,[l("div",ye,[xe,t(T,{"content-position":"right"},{default:e(()=>[c(E).userInfo.authorityId===888?(r(),p(N,{key:0,placement:"top-start",width:"50",trigger:"hover"},{reference:e(()=>[t(u,{size:"small",icon:"plus",circle:"",autofocus:"",onClick:o[0]||(o[0]=n=>i.value=!0),class:"text-gray-900 bg-gradient-to-r from-teal-200 to-lime-200 hover:bg-gradient-to-l hover:from-teal-200 hover:to-lime-200 focus:ring-4 focus:outline-none focus:ring-lime-200 dark:focus:ring-teal-700 font-medium rounded-lg text-sm px-5"})]),default:e(()=>[he]),_:1})):x("",!0)]),_:1}),_.value?(r(),p(M,{key:0},{default:e(()=>[(r(!0),C(Q,null,R(D.value,(n,q)=>(r(),p(L,{key:q,timestamp:c(I)(n.CreatedAt).trim().split(/\s+/)[0],placement:"top",color:A.value,class:"text-left"},{default:e(()=>[t(G,{class:"text-gray-900 bg-gradient-to-r from-pink-400 to-cyan-300 hover:bg-gradient-to-l hover:from-pink-400 hover:to-cyan-300 focus:ring-4 focus:outline-none focus:ring-lime-200 dark:focus:ring-teal-700 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2"},{header:e(()=>[l("div",Ee,[l("span",null,h(n.title),1),c(E).userInfo.authorityId===888?(r(),p(j,{key:0,onConfirm:Ie=>F(n.id),"confirm-button-text":"确定","cancel-button-text":"取消",icon:c(W),"icon-color":"red",title:"确定删除该公告吗？","confirm-button-type":"danger"},{reference:e(()=>[t(u,{style:{float:"right",padding:"3px 0"},link:""},{default:e(()=>[t(z,{style:{color:"#99154b"}},{default:e(()=>[t(U)]),_:1})]),_:1})]),_:2},1032,["onConfirm","icon"])):x("",!0)])]),default:e(()=>[l("h4",be,h(n.content),1),l("p",ke," 管理员 发布于: "+h(c(I)(n.CreatedAt)),1)]),_:2},1024)]),_:2},1032,["timestamp","color"]))),128))]),_:1})):x("",!0)])]),t($,{center:"",title:"创建公告",modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=n=>i.value=n),width:"30%","show-close":!1},{footer:e(()=>[l("div",Ce,[t(u,{onClick:S},{default:e(()=>[w("取 消")]),_:1}),t(u,{type:"primary",onClick:B},{default:e(()=>[w("确 定")]),_:1})])]),default:e(()=>[t(P,{"label-position":"left","label-width":"50px"},{default:e(()=>[t(k,{label:"标题:"},{default:e(()=>[t(b,{modelValue:g.value,"onUpdate:modelValue":o[1]||(o[1]=n=>g.value=n),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),t(k,{label:"内容:"},{default:e(()=>[t(b,{type:"textarea",modelValue:v.value,"onUpdate:modelValue":o[2]||(o[2]=n=>v.value=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),qe=_e(we,[["__scopeId","data-v-d8e2d06f"]]);export{qe as default};
