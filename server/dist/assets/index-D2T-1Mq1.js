import{u as W,r as s,a2 as X,L as Y,a as V,o as d,c as S,e as a,b as e,f,k as r,z as _,w as t,ad as h,F as Z,j as ee,t as te,aS as oe,n as le,l as u,E as ne,q as ae,x as se,p as re,g as ie}from"./index-BZvC1LFB.js";import{E as ce}from"./el-dialog-xM_jmMew.js";import{E as de,a as ue}from"./el-form-item-Cd_XCOi4.js";import{G as fe,A as me,D as pe,U as _e,E as ve,a as ge,b as ye}from"./announcement-DYum6spC.js";import{E as xe}from"./el-card-BDDDD4UF.js";import"./el-popper-CKkpa1WL.js";import{E as he}from"./el-popover-DgIJOLdx.js";import{f as be}from"./format-8cCTDHEj.js";import{E as z}from"./style-ggDyXmfQ.js";import{M as ke}from"./index-D1gv0VDz.js";/* empty css                */import{_ as Ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./refs-ibKUFCnL.js";import"./isUndefined-DCTLXrZ8.js";import"./castArray-sZ2D1bz-.js";import"./_baseClone-BeqKcFuR.js";import"./_initCloneObject-Biqzf-Ei.js";import"./dropdown-B-FH0DWI.js";const C=v=>(re("data-v-fc2d9b49"),v=v(),ie(),v),we={id:"index"},Ve={class:"block"},Ce={class:"container backgroundForm px-10 py-5"},Ie={class:"flex justify-center items-center"},Ae={style:{"text-align":"center"},class:"text-2xl text-cyan-300"},De=C(()=>a("div",null,[a("span",{style:{"margin-left":"5px"}},"可创建比赛介绍")],-1)),Ue=C(()=>a("div",{class:"clearfix text-left"},null,-1)),Se={style:{float:"right","font-size":"12px",color:"#8f8f8f"},class:"text-cyan-500"},ze=C(()=>a("div",null," 建议使用字体颜色：<font color= #80ffff size=4>text</font> ",-1)),Be={class:"dialog-footer"},Fe={class:"dialog-footer"},Pe="preview-only",Me=Object.assign({name:"announcement"},{__name:"index",setup(v){const b=W(),m=s(!1),p=s(!1),B=s("#80ffff"),k=s([]),E=s(!0),w=s(""),i=s(""),g=async()=>{try{let n=await fe();k.value=n.data.filter(o=>o.title==="比赛介绍"),console.log(k.value),E.value=!1,le(()=>{E.value=!0})}catch{u({type:"error",message:"获取数据失败,请检查网络!"})}};X(()=>{g()});const F=Y(()=>[...k.value].sort((n,o)=>new Date(o.CreatedAt)-new Date(n.CreatedAt))),I=()=>{m.value=!1,p.value=!1},P=async()=>{try{await me({title:w.value,content:i.value}),u({type:"success",message:"添加成功"}),m.value=!1,g()}catch{u({type:"error",message:"添加失败"})}},M=async n=>{(await pe({id:n})).code===0?(u({type:"success",message:"删除成功"}),g()):u({type:"error",message:"删除失败"})},N=async()=>{console.log(),(await _e({id:y.value.id,title:y.value.title,content:i.value})).code===0?(u({type:"success",message:"更新成功"}),p.value=!1,g()):u({type:"error",message:"更新失败"})},y=s({}),T=n=>{i.value=n.content,y.value={id:n.id,title:n.title},p.value=!0};return(n,o)=>{const $=V("dv-decoration5"),c=ne,j=he,G=V("Close"),A=ae,L=ve,q=V("EditPen"),O=xe,H=ge,J=ye,K=se,x=de,D=ue,U=ce;return d(),S("div",we,[a("div",Ve,[a("div",Ce,[a("div",Ie,[e($,{dur:3,style:{width:"300px",height:"40px"},color:["#80ffff","#80ffff"]})]),a("h1",Ae,[f(" 比赛介绍 "),r(b).userInfo.authorityId===888?(d(),_(j,{key:0,placement:"top-start",width:"50",trigger:"hover"},{reference:t(()=>[e(c,{size:"small",icon:"plus",circle:"",autofocus:"",onClick:o[0]||(o[0]=l=>m.value=!0),class:"text-gray-900 bg-gradient-to-r from-pink-400 to-cyan-200 hover:bg-gradient-to-l hover:from-pink-400 hover:to-cyan-200 focus:ring-4 focus:outline-none focus:ring-cyan-200 font-medium rounded-lg text-sm px-5"})]),default:t(()=>[De]),_:1})):h("",!0)]),E.value?(d(),_(J,{key:0},{default:t(()=>[(d(!0),S(Z,null,ee(F.value,(l,Q)=>(d(),_(H,{key:Q,placement:"top",color:B.value,class:"text-left"},{default:t(()=>[e(O,{class:"text-gray-900 bg-transparent focus:ring-4 focus:outline-none focus:ring-lime-200 font-medium rounded-lg text-sm px-5 py-0 me-0 mb-2 border-0"},{default:t(()=>[Ue,e(r(ke),{editorId:Pe,modelValue:l.content,class:"bg-transparent"},null,8,["modelValue"]),a("p",Se," 管理员 发布于: "+te(r(be)(l.CreatedAt)),1),r(b).userInfo.authorityId===888?(d(),_(L,{key:0,onConfirm:R=>M(l.id),"confirm-button-text":"确定","cancel-button-text":"取消",icon:r(oe),"icon-color":"red",title:"确定删除该介绍吗？","confirm-button-type":"danger"},{reference:t(()=>[e(c,{style:{float:"right",padding:"3px 0"},link:""},{default:t(()=>[e(A,{style:{color:"#f56c6c"}},{default:t(()=>[e(G)]),_:1})]),_:1})]),_:2},1032,["onConfirm","icon"])):h("",!0),r(b).userInfo.authorityId===888?(d(),_(c,{key:1,onClick:R=>T(l),style:{float:"right",padding:"3px 3px"},link:""},{default:t(()=>[e(A,{style:{color:"pink"}},{default:t(()=>[e(q)]),_:1})]),_:2},1032,["onClick"])):h("",!0)]),_:2},1024)]),_:2},1032,["color"]))),128))]),_:1})):h("",!0)])]),e(U,{center:"",title:"创建介绍",modelValue:m.value,"onUpdate:modelValue":o[3]||(o[3]=l=>m.value=l),width:"60%","show-close":!1},{footer:t(()=>[a("div",Be,[e(c,{onClick:I},{default:t(()=>[f("取 消")]),_:1}),e(c,{type:"primary",onClick:P},{default:t(()=>[f("确 定")]),_:1})])]),default:t(()=>[e(D,{"label-position":"left","label-width":"50px"},{default:t(()=>[ze,e(x,{label:"标题:"},{default:t(()=>[e(K,{modelValue:w.value,"onUpdate:modelValue":o[1]||(o[1]=l=>w.value=l),placeholder:"必须输入'比赛介绍'作为标题,否则为公告"},null,8,["modelValue"])]),_:1}),e(x,{label:"内容:"},{default:t(()=>[e(r(z),{modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=l=>i.value=l),class:"h-80"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(U,{center:"",title:"更新介绍",modelValue:p.value,"onUpdate:modelValue":o[6]||(o[6]=l=>p.value=l),width:"60%","show-close":!1},{footer:t(()=>[a("div",Fe,[e(c,{onClick:I},{default:t(()=>[f("取 消")]),_:1}),e(c,{type:"primary",onClick:o[5]||(o[5]=l=>N(y.value))},{default:t(()=>[f("更新")]),_:1})])]),default:t(()=>[e(D,{"label-position":"left","label-width":"50px"},{default:t(()=>[e(x,{label:"提示:"},{default:t(()=>[f(" 建议使用字体颜色：<font color= #80ffff size=4>text</font> ")]),_:1}),e(x,{label:"内容:"},{default:t(()=>[e(r(z),{modelValue:i.value,"onUpdate:modelValue":o[4]||(o[4]=l=>i.value=l),class:"h-80"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),tt=Ee(Me,[["__scopeId","data-v-fc2d9b49"]]);export{tt as default};
